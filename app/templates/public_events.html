{% extends 'base.html' %}

{% block head %}
<title>All Upcoming Events</title>
<style>
    .event-card { transition: transform 0.3s; cursor: pointer; border: none; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .event-card:hover { transform: translateY(-5px); box-shadow: 0 8px 25px rgba(0,0,0,0.2); }
    .date-badge { background: #ff4757; color: white; padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; }
</style>
{% endblock %}

{% block body %}
<div class="jumbotron jumbotron-fluid bg-dark text-white">
    <div class="container text-center">
        <h1 class="display-4">Community Events</h1>
        <p class="lead">Join us at these upcoming public celebrations hosted by Sync & Celebrate.</p>
    </div>
</div>

<div class="container mt-5 mb-5">
    <div class="row">
        {% if events %}
            {% for event in events %}
            <div class="col-md-4 mb-4">
                <div class="card event-card h-100" data-toggle="modal" data-target="#eventModal{{ event.eid }}">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <span class="badge badge-primary">{{ event.etype }}</span>
                            <span class="date-badge">{{ event.edate }}</span>
                        </div>
                        <h4 class="card-title">{{ event.evenue }}</h4>
                        <p class="card-text text-muted">Hosted by {{ event.username }}</p>
                        <button class="btn btn-outline-dark btn-sm btn-block mt-3">View Details</button>
                    </div>
                </div>

                <div class="modal fade" id="eventModal{{ event.eid }}" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header bg-primary text-white">
                                <h5 class="modal-title">{{ event.etype }} Celebration</h5>
                                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <p><strong>ğŸ“… Date:</strong> {{ event.edate }}</p>
                                <p><strong>ğŸ“ Venue:</strong> {{ event.evenue }}</p>
                                <p><strong>ğŸ‘¤ Host:</strong> {{ event.username }}</p>
                                <p><strong>ğŸ‘¥ Expected Guests:</strong> {{ event.emax_people }}</p>
                                <hr>
                                <p class="text-muted small">This is a public event managed by Sync & Celebrate. Please contact the host for invitation details.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="col-12 text-center">
                <h3>No public events found.</h3>
                <a href="{{ url_for('main.index') }}" class="btn btn-primary mt-3">Back Home</a>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
